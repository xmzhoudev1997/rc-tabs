"use strict";(self.webpackChunk_xmzhou_rc_tabs=self.webpackChunk_xmzhou_rc_tabs||[]).push([[433],{57182:function(ve,J,N){N.r(J),N.d(J,{default:function(){return oe}});var q=N(48305),H=N.n(q),_=N(26068),z=N.n(_),L=N(50959),ee=N(82187),V=N.n(ee),ne=N(90228),m=N.n(ne),re=N(15558),M=N.n(re),ae=N(87999),I=N.n(ae),Q=N(10782),te=N(53125),ie=function(x){var f,y=x.tabKey,d=x.tabList,i=x.maxTabWidth,C=i===void 0?216:i,w=x.minTabWidth,v=w===void 0?76:w,K=x.onChange,U=K===void 0?function(){}:K,D=(0,L.useState)(!0),T=H()(D,2),k=T[0],W=T[1],P=(0,L.useRef)(null),o=(0,L.useRef)(null),u=(0,Q.Z)(P),e=(0,Q.Z)(o),a=(f=P.current)===null||f===void 0?void 0:f.querySelector(".xm-tabs-scroll"),r=(0,te.Z)(a),t=(0,L.useMemo)(function(){if(!(u!=null&&u.width)||!(d!=null&&d.length)||!v||!C)return 0;var n=d==null?void 0:d.length,c=(u==null?void 0:u.width)-((e==null?void 0:e.width)||0);return n*C<=c?C:n*v<=c?Math.floor(c/n)-24:v},[u==null?void 0:u.width,e==null?void 0:e.width,d==null?void 0:d.length]),l=function(){var n=I()(m()().mark(function c(s){var R,j,$,p,b,O,g,S,A,E,Z,F;return m()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(g=(R=s==null||(j=s.source)===null||j===void 0?void 0:j.index)!==null&&R!==void 0?R:-1,S=($=s==null||(p=s.destination)===null||p===void 0?void 0:p.index)!==null&&$!==void 0?$:-1,A=s==null||(b=s.source)===null||b===void 0?void 0:b.droppableId,E=d[g],Z=(s==null||(O=s.destination)===null||O===void 0?void 0:O.droppableId)||"",F=d[S],!(!A||!E||!Z||!F)){G.next=8;break}return G.abrupt("return");case 8:d.splice(g,1),d.splice(S,0,E),E.fixed&&d[S-1]&&(F.fixed=d[S-1].fixed),!E.fixed&&d[S+1]&&(F.fixed=d[S+1].fixed),U(y,M()(d));case 13:case"end":return G.stop()}},c)}));return function(s){return n.apply(this,arguments)}}();return(0,L.useEffect)(function(){if(!(!y||!a)){var n=d.findIndex(function(c){return c.key===y});a.children[n]&&a.children[n].scrollIntoViewIfNeeded()}},[y]),(0,L.useEffect)(function(){var n=(r==null?void 0:r.left)||0,c=(a==null?void 0:a.offsetWidth)||0,s=(a==null?void 0:a.scrollWidth)||0-1;W(s<=c||n+c>=s)},[r,a==null?void 0:a.offsetWidth,a==null?void 0:a.scrollWidth]),{tabWidth:t,tabNavRef:P,tabOperRef:o,handleDragEnd:l,isLeft:!(r!=null&&r.left),isRight:k}},B=N(9689),h=N(11527),le=function(f){var y=f.className,d=f.tabClassName,i=f.tabKey,C=f.tabList,w=f.dragDisabled,v=f.tabRender,K=f.addRender,U=f.tabContextMenuRender,D=f.tabOperRender,T=f.moreRender,k=f.extraRender,W=f.onChange,P=W===void 0?function(){}:W,o=f.tabIconRender,u=f.tabTipRender,e=ie(f),a=e.tabWidth,r=e.tabNavRef,t=e.tabOperRef,l=e.handleDragEnd,n=e.isLeft,c=e.isRight,s=K?K():null,R=T?T():null,j=k?k():null,$=function(b,O,g){var S,A=D?D(b):null,E=o?o(b):null,Z=(0,h.jsxs)("div",z()(z()(z()({className:V()("xm-tab",d,i===b.key?"xm-tab-active":"",O?"xm-tab-dragging":""),ref:g==null?void 0:g.innerRef},(g==null?void 0:g.dragHandleProps)||{}),(g==null?void 0:g.draggableProps)||{}),{},{style:z()(z()({},(g==null||(S=g.draggableProps)===null||S===void 0?void 0:S.style)||{}),{},{width:a}),onClick:function(){return i===b.key?null:P(b.key,C)},children:[!!E&&(0,h.jsx)("div",{className:"xm-tab-icon",children:E}),(0,h.jsx)("div",{className:"xm-tab-name",children:v?v(b):b.label}),!!A&&(0,h.jsxs)("div",{className:"xm-tab-oper",children:[(0,h.jsx)("div",{className:i===b.key?"xm-tab-oper-shadow-active":"xm-tab-oper-shadow"}),(0,h.jsx)("div",{className:i===b.key?"xm-tab-oper-bg-active":"xm-tab-oper-bg",children:(0,h.jsx)("div",{onClick:function(G){return G.stopPropagation()},children:A})}),(0,h.jsx)("div",{className:i===b.key?"xm-tab-padding-active":"xm-tab-padding"})]})]})),F=u?u(b,Z):Z;return U?U(b,F):F};return(0,h.jsx)("div",{className:V()("xm-tabs-nav",y),children:(0,h.jsxs)(B.Z5,{onDragEnd:l,children:[(0,h.jsx)(B.bK,{droppableId:"nav",direction:"horizontal",isDropDisabled:w,renderClone:function(b,O,g){var S,A,E=g==null||(S=g.source)===null||S===void 0?void 0:S.index,Z=C[E];if(!Z)return null;if((A=b.draggableProps.style)!==null&&A!==void 0&&A.transform){var F;b.draggableProps.style.transform=(F=b.draggableProps.style)===null||F===void 0?void 0:F.transform.replace(/, [\-0-9]+px/,", 0px")}return $(Z,!0,b)},children:function(b){return(0,h.jsxs)("div",z()(z()({className:"xm-tabs-bar",ref:function(g){r.current=g,b.innerRef(g)}},b.droppableProps),{},{children:[!n&&(0,h.jsx)("div",{className:"xm-tabs-scroll-left"}),(0,h.jsxs)("div",{className:"xm-tabs-scroll",tabIndex:1,children:[C==null?void 0:C.map(function(O,g){return(0,h.jsx)(B._l,{draggableId:O.key,index:g,isDragDisabled:w,children:function(A,E){return $(O,E.isDragging,A)}},O.key)}),b.placeholder]}),(0,h.jsxs)("div",{className:"xm-tabs-oper",ref:t,children:[!c&&(0,h.jsx)("div",{className:"xm-tabs-scroll-right"}),!!s&&(0,h.jsx)("div",{className:"xm-tabs-add",children:s}),!!R&&!!s&&(0,h.jsx)("div",{className:"xm-tabs-split"}),!!R&&(0,h.jsx)("div",{className:"xm-tabs-more",children:R})]})]}))}}),!!j&&(0,h.jsx)("div",{className:"xm-tabs-extra",children:j})]})})},ue=le,X=N(58199),se=function(x,f){var y=x.cacheNum,d=y===void 0?5:y,i=x.fixedCacheNum,C=i===void 0?10:i,w=x.onChange,v=w===void 0?function(){}:w,K=x.onInit,U=K===void 0?function(){return null}:K,D=(0,X.Z)({list:[],tabKey:""}),T=H()(D,2),k=T[0],W=T[1],P=function(){var e=I()(m()().mark(function a(r,t){var l,n,c,s,R,j;return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(l=k.list.find(function(b){return b.tabKey===r}),l){p.next=31;break}n={tabKey:r,data:null},k.list.push(n),c=[],s=0,R=0,j=k.list.length-1;case 8:if(!(j>=0)){p.next=20;break}if(!(k.list[j].fixed&&R<C)){p.next=13;break}return c.unshift(k.list[j]),R+=1,p.abrupt("continue",17);case 13:if(!(s<d)){p.next=17;break}return c.unshift(k.list[j]),s+=1,p.abrupt("continue",17);case 17:j-=1,p.next=8;break;case 20:if(W({list:c,tabKey:r}),v(r,n==null?void 0:n.data),!(n.tabKey&&t)){p.next=28;break}return p.next=25,U(n.tabKey,t);case 25:n.data=p.sent,W({list:c}),v(r,n==null?void 0:n.data);case 28:return p.abrupt("return");case 31:l.fixed=t==null?void 0:t.fixed,W({list:k.list,tabKey:r});case 33:v(r,l==null?void 0:l.data);case 34:case"end":return p.stop()}},a)}));return function(r,t){return e.apply(this,arguments)}}(),o=function(){var e=I()(m()().mark(function a(r,t){var l;return m()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(l=k.list.find(function(s){return s.tabKey===r}),l){c.next=3;break}return c.abrupt("return");case 3:l.data=t,W({list:k.list}),v(r,l==null?void 0:l.data);case 6:case"end":return c.stop()}},a)}));return function(r,t){return e.apply(this,arguments)}}(),u=function(){var e=I()(m()().mark(function a(r){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:W({list:k.list.filter(function(n){return n.tabKey!==r})}),v(r,null,!0);case 2:case"end":return l.stop()}},a)}));return function(r){return e.apply(this,arguments)}}();return(0,L.useImperativeHandle)(f,function(){return{list:k.list,tabKey:k.tabKey,open:P,update:o,close:u}},[k.list,k.tabKey]),z()({handleUpdate:o},k)},de=(0,L.forwardRef)(function(x,f){var y=x.children,d=se(x,f),i=d.list,C=d.tabKey,w=d.handleUpdate;return(0,h.jsx)("div",{className:V()("xm-tabs-panels"),children:i.map(function(v){return(0,h.jsx)("div",{className:V()("xm-tabs-panel",C===v.tabKey?"xm-tabs-panel-active":""),children:y(v.tabKey,v.data,w)},v.tabKey)})})}),ce=de,fe=function(x,f){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{open:function(){},close:function(){},update:function(){}},i=(0,L.useRef)({activeKey:x,list:f});i.current.activeKey=x,i.current.list=f;var C=function(){var o=I()(m()().mark(function u(e,a){var r,t,l;return m()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t=(r=i.current.list)===null||r===void 0?void 0:r.find(function(s){return s.key===e}),t){c.next=3;break}return c.abrupt("return");case 3:l=!1,Object.entries(a).forEach(function(s){var R=H()(s,2),j=R[0],$=R[1];t[j]!==$&&(t[j]=$,l=!0)}),l&&y(i.current.activeKey,M()(i.current.list));case 6:case"end":return c.stop()}},u)}));return function(e,a){return o.apply(this,arguments)}}(),w=function(){var o=I()(m()().mark(function u(e){var a;return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.key===null||e.key===void 0||e.key===""||Number.isNaN(e.key))){t.next=2;break}return t.abrupt("return");case 2:if(a=i.current.list.find(function(l){return l.key===e.key}),!a){t.next=7;break}return C(e.key,e),y(e.key,M()(i.current.list)),t.abrupt("return");case 7:i.current.list.push(e),y(e.key,M()(i.current.list));case 9:case"end":return t.stop()}},u)}));return function(e){return o.apply(this,arguments)}}(),v=function(){var o=I()(m()().mark(function u(e){var a,r,t,l,n,c,s,R=arguments;return m()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return a=R.length>1&&R[1]!==void 0?R[1]:function(){return!0},$.next=3,a(e);case 3:if($.sent){$.next=5;break}return $.abrupt("return",!1);case 5:return r=i.current.list.findIndex(function(p){return p.key===e.key}),i.current.list.splice(r,1),t=i.current.activeKey,l=i.current.list.findIndex(function(p){return p.key===i.current.activeKey}),l===-1&&(i.current.list[r]?t=(s=i.current.list[r])===null||s===void 0?void 0:s.key:(c=r-1<0?0:r-1,t=(n=i.current.list[c])===null||n===void 0?void 0:n.key)),y(t,M()(i.current.list)),d==null||d.close(e.key),$.abrupt("return",!0);case 13:case"end":return $.stop()}},u)}));return function(e){return o.apply(this,arguments)}}(),K=function(){var o=I()(m()().mark(function u(){var e,a,r,t=arguments;return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=t.length>0&&t[0]!==void 0?t[0]:function(){return!0},a=i.current.list.filter(function(c){return!c.fixed});case 2:if(!(a.length>0)){n.next=13;break}if(r=a[0],r){n.next=6;break}return n.abrupt("break",13);case 6:return n.next=8,v(r,e);case 8:if(n.sent){n.next=10;break}return n.abrupt("break",13);case 10:a=i.current.list.filter(function(c){return!c.fixed}),n.next=2;break;case 13:case"end":return n.stop()}},u)}));return function(){return o.apply(this,arguments)}}(),U=function(){var o=I()(m()().mark(function u(e){var a,r,t=arguments;return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=t.length>1&&t[1]!==void 0?t[1]:function(){return!0};case 1:if(!(i.current.list.length>1)){n.next=11;break}if(r=i.current.list.find(function(c){return c.key!==e.key&&!c.fixed}),r){n.next=5;break}return n.abrupt("break",11);case 5:return n.next=7,v(r,a);case 7:if(n.sent){n.next=9;break}return n.abrupt("break",11);case 9:n.next=1;break;case 11:case"end":return n.stop()}},u)}));return function(e){return o.apply(this,arguments)}}(),D=function(){var o=I()(m()().mark(function u(e){var a,r,t,l,n=arguments;return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:a=n.length>1&&n[1]!==void 0?n[1]:function(){return!0},r=i.current.list.findIndex(function(R){return R.key===e.key}),t=i.current.list.slice(r+1).filter(function(R){return!R.fixed});case 3:if(!(t.length>0)){s.next=14;break}if(l=t[0],l){s.next=7;break}return s.abrupt("break",14);case 7:return s.next=9,v(l,a);case 9:if(s.sent){s.next=11;break}return s.abrupt("break",14);case 11:t=i.current.list.slice(r+1),s.next=3;break;case 14:case"end":return s.stop()}},u)}));return function(e){return o.apply(this,arguments)}}(),T=function(){var o=I()(m()().mark(function u(){var e,a;return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=i.current.list.filter(function(l){return!l.fixed&&!l.edited});case 1:if(!(e.length>0)){t.next=12;break}if(a=e[0],a){t.next=5;break}return t.abrupt("break",12);case 5:return t.next=7,v(a);case 7:if(t.sent){t.next=9;break}return t.abrupt("break",12);case 9:e=i.current.list.filter(function(l){return!l.fixed&&!l.edited}),t.next=1;break;case 12:case"end":return t.stop()}},u)}));return function(){return o.apply(this,arguments)}}(),k=function(){var o=I()(m()().mark(function u(e,a){var r;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:C(e,{fixed:a}),r=i.current.list.find(function(n){return n.key===e}),d==null||d.open(i.current.activeKey,r);case 3:case"end":return l.stop()}},u)}));return function(e,a){return o.apply(this,arguments)}}(),W=function(){var o=I()(m()().mark(function u(e,a){var r;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:C(e,{edited:a}),r=i.current.list.find(function(n){return n.key===e}),d==null||d.open(i.current.activeKey,r);case 3:case"end":return l.stop()}},u)}));return function(e,a){return o.apply(this,arguments)}}(),P=function(u){var e=u.filter(function(r){return r.fixed}),a=u.filter(function(r){return!r.fixed});return[].concat(M()(e),M()(a))};return(0,L.useEffect)(function(){var o=!1;f==null||f.forEach(function(u,e){u.fixed&&f[e-1]&&!f[e-1].fixed&&(o=!0)}),o&&y(x,P(f))},[f]),(0,L.useEffect)(function(){var o=i.current.list.find(function(u){return u.key===x});d==null||d.open(x,o)},[x,d]),{update:C,add:w,close:v,closeAll:K,closeOther:U,closeRight:D,closeSaved:T,fixed:k,edited:W}},oe=function(){var x=(0,X.Z)({tabList:[{key:"1",label:"\u6807\u7B7E\u98751",closeable:!0},{key:"2",label:"\u6807\u7B7E\u98752",closeable:!0},{key:"3",label:"\u6807\u7B7E\u98753",closeable:!0},{key:"5",label:"\u6807\u7B7E\u98755",closeable:!0},{key:"6",label:"\u6807\u7B7E\u98756",closeable:!0},{key:"7",label:"\u6807\u7B7E\u98757",closeable:!0},{key:"8",label:"\u6807\u7B7E\u98758",closeable:!0},{key:"4",label:"\u6807\u7B7E\u98754",closeable:!0,fixed:!0}],tabKey:"1"}),f=H()(x,2),y=f[0],d=f[1],i=(0,L.useRef)(null),C=fe(y.tabKey,y.tabList,function(w,v){return d({tabKey:w,tabList:v})},i.current);return(0,h.jsxs)("div",{style:{display:"flex",height:400,flexDirection:"column"},children:[(0,h.jsx)(ue,{tabKey:y.tabKey,tabList:y.tabList,onChange:function(v,K){d({tabKey:v,tabList:K})},panel:i.current,addRender:function(){return 1234}}),(0,h.jsx)(ce,{ref:i,children:function(v,K,U){var D=y.tabList.find(function(T){return T.key===v});return(0,h.jsx)("div",{style:{height:"100%"},suppressContentEditableWarning:!0,contentEditable:!0,children:D==null?void 0:D.label})}})]})}}}]);
