"use strict";(self.webpackChunk_xmzhou_rc_tabs=self.webpackChunk_xmzhou_rc_tabs||[]).push([[433],{57182:function(ve,B,R){R.r(B),R.d(B,{default:function(){return ce}});var X=R(48305),H=R.n(X),Y=R(26068),P=R.n(Y),A=R(50959),q=R(82187),G=R.n(q),_=R(90228),p=R.n(_),ee=R(15558),z=R.n(ee),ne=R(87999),L=R.n(ne),J=R(10782),re=R(53125),ae=function(y){var c,k=y.tabKey,u=y.tabList,i=y.maxTabWidth,C=i===void 0?216:i,I=y.minTabWidth,h=I===void 0?76:I,D=y.onChange,F=D===void 0?function(){}:D,K=(0,A.useRef)(null),O=(0,A.useRef)(null),v=(0,J.Z)(K),w=(0,J.Z)(O),S=(c=K.current)===null||c===void 0?void 0:c.querySelector(".xm-tabs-scroll"),d=(0,re.Z)(S),s=(0,A.useMemo)(function(){if(!(v!=null&&v.width)||!(u!=null&&u.length)||!h||!C)return 0;var l=u==null?void 0:u.length,n=(v==null?void 0:v.width)-((w==null?void 0:w.width)||0);return l*C<=n?C:l*h<=n?Math.floor(n/l)-24:h},[v==null?void 0:v.width,w==null?void 0:w.width,u==null?void 0:u.length]),r=function(){var l=L()(p()().mark(function n(e){var t,a,f,o,N,j,$,b,g,T,x,E;return p()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if($=(t=e==null||(a=e.source)===null||a===void 0?void 0:a.index)!==null&&t!==void 0?t:-1,b=(f=e==null||(o=e.destination)===null||o===void 0?void 0:o.index)!==null&&f!==void 0?f:-1,g=e==null||(N=e.source)===null||N===void 0?void 0:N.droppableId,T=u[$],x=(e==null||(j=e.destination)===null||j===void 0?void 0:j.droppableId)||"",E=u[b],!(!g||!T||!x||!E)){W.next=8;break}return W.abrupt("return");case 8:u.splice($,1),u.splice(b,0,T),T.fixed&&u[b-1]&&(E.fixed=u[b-1].fixed),!T.fixed&&u[b+1]&&(E.fixed=u[b+1].fixed),F(k,z()(u));case 13:case"end":return W.stop()}},n)}));return function(e){return l.apply(this,arguments)}}();return(0,A.useEffect)(function(){if(!(!k||!S)){var l=u.findIndex(function(n){return n.key===k});S.children[l].scrollIntoViewIfNeeded()}},[k]),{tabWidth:s,tabNavRef:K,tabOperRef:O,handleDragEnd:r,isLeft:!(d!=null&&d.left),isRight:((d==null?void 0:d.left)||0)+((S==null?void 0:S.offsetWidth)||0)>=((S==null?void 0:S.scrollWidth)||0)-1}},V=R(9689),m=R(11527),te=function(c){var k=c.className,u=c.tabClassName,i=c.tabKey,C=c.tabList,I=c.dragDisabled,h=c.tabRender,D=c.addRender,F=c.tabContextMenuRender,K=c.tabOperRender,O=c.moreRender,v=c.extraRender,w=c.onChange,S=w===void 0?function(){}:w,d=c.tabIconRender,s=c.tabTipRender,r=ae(c),l=r.tabWidth,n=r.tabNavRef,e=r.tabOperRef,t=r.handleDragEnd,a=r.isLeft,f=r.isRight,o=D?D():null,N=O?O():null,j=v?v():null,$=function(g,T,x){var E,U=K?K(g):null,W=d?d(g):null,M=(0,m.jsxs)("div",P()(P()(P()({className:G()("xm-tab",u,i===g.key?"xm-tab-active":"",T?"xm-tab-dragging":""),ref:x==null?void 0:x.innerRef},(x==null?void 0:x.dragHandleProps)||{}),(x==null?void 0:x.draggableProps)||{}),{},{style:P()(P()({},(x==null||(E=x.draggableProps)===null||E===void 0?void 0:E.style)||{}),{},{width:l}),onClick:function(){return i===g.key?null:S(g.key,C)},children:[!!W&&(0,m.jsx)("div",{className:"xm-tab-icon",children:W}),(0,m.jsx)("div",{className:"xm-tab-name",children:h?h(g):g.label}),!!U&&(0,m.jsxs)("div",{className:"xm-tab-oper",children:[(0,m.jsx)("div",{className:i===g.key?"xm-tab-oper-shadow-active":"xm-tab-oper-shadow"}),(0,m.jsx)("div",{className:i===g.key?"xm-tab-oper-bg-active":"xm-tab-oper-bg",children:(0,m.jsx)("div",{onClick:function(oe){return oe.stopPropagation()},children:U})}),(0,m.jsx)("div",{className:i===g.key?"xm-tab-padding-active":"xm-tab-padding"})]})]})),Z=s?s(g,M):M;return F?F(g,Z):Z};return(0,m.jsx)("div",{className:G()("xm-tabs-nav",k),children:(0,m.jsxs)(V.Z5,{onDragEnd:t,children:[(0,m.jsx)(V.bK,{droppableId:"nav",direction:"horizontal",isDropDisabled:I,renderClone:function(g,T,x){var E,U,W=x==null||(E=x.source)===null||E===void 0?void 0:E.index,M=C[W];if(!M)return null;if((U=g.draggableProps.style)!==null&&U!==void 0&&U.transform){var Z;g.draggableProps.style.transform=(Z=g.draggableProps.style)===null||Z===void 0?void 0:Z.transform.replace(/, [\-0-9]+px/,", 0px")}return $(M,!0,g)},children:function(g){return(0,m.jsxs)("div",P()(P()({className:"xm-tabs-bar",ref:function(x){n.current=x,g.innerRef(x)}},g.droppableProps),{},{children:[!a&&(0,m.jsx)("div",{className:"xm-tabs-scroll-left"}),(0,m.jsxs)("div",{className:"xm-tabs-scroll",tabIndex:1,children:[C==null?void 0:C.map(function(T,x){return(0,m.jsx)(V._l,{draggableId:T.key,index:x,isDragDisabled:I,children:function(U,W){return $(T,W.isDragging,U)}},T.key)}),g.placeholder]}),(0,m.jsxs)("div",{className:"xm-tabs-oper",ref:e,children:[!f&&(0,m.jsx)("div",{className:"xm-tabs-scroll-right"}),!!o&&(0,m.jsx)("div",{className:"xm-tabs-add",children:o}),!!N&&!!o&&(0,m.jsx)("div",{className:"xm-tabs-split"}),!!N&&(0,m.jsx)("div",{className:"xm-tabs-more",children:N})]})]}))}}),!!j&&(0,m.jsx)("div",{className:"xm-tabs-extra",children:j})]})})},ie=te,Q=R(58199),le=function(y,c){var k=y.cacheNum,u=k===void 0?5:k,i=y.fixedCacheNum,C=i===void 0?10:i,I=y.onChange,h=I===void 0?function(){}:I,D=y.onInit,F=D===void 0?function(){return null}:D,K=(0,Q.Z)({list:[],tabKey:""}),O=H()(K,2),v=O[0],w=O[1],S=function(){var r=L()(p()().mark(function l(n,e){var t,a,f,o,N,j;return p()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(t=v.list.find(function(g){return g.tabKey===n}),t){b.next=31;break}a={tabKey:n,data:null},v.list.push(a),f=[],o=0,N=0,j=v.list.length-1;case 8:if(!(j>=0)){b.next=20;break}if(!(v.list[j].fixed&&N<C)){b.next=13;break}return f.unshift(v.list[j]),N+=1,b.abrupt("continue",17);case 13:if(!(o<u)){b.next=17;break}return f.unshift(v.list[j]),o+=1,b.abrupt("continue",17);case 17:j-=1,b.next=8;break;case 20:if(w({list:f,tabKey:n}),h(n,a==null?void 0:a.data),!(a.tabKey&&e)){b.next=28;break}return b.next=25,F(a.tabKey,e);case 25:a.data=b.sent,w({list:f}),h(n,a==null?void 0:a.data);case 28:return b.abrupt("return");case 31:t.fixed=e==null?void 0:e.fixed,w({list:v.list,tabKey:n});case 33:h(n,t==null?void 0:t.data);case 34:case"end":return b.stop()}},l)}));return function(n,e){return r.apply(this,arguments)}}(),d=function(){var r=L()(p()().mark(function l(n,e){var t;return p()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=v.list.find(function(o){return o.tabKey===n}),t){f.next=3;break}return f.abrupt("return");case 3:t.data=e,w({list:v.list}),h(n,t==null?void 0:t.data);case 6:case"end":return f.stop()}},l)}));return function(n,e){return r.apply(this,arguments)}}(),s=function(){var r=L()(p()().mark(function l(n){return p()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:w({list:v.list.filter(function(a){return a.tabKey!==n})}),h(n,null,!0);case 2:case"end":return t.stop()}},l)}));return function(n){return r.apply(this,arguments)}}();return(0,A.useImperativeHandle)(c,function(){return{list:v.list,tabKey:v.tabKey,open:S,update:d,close:s}},[v.list,v.tabKey]),P()({handleUpdate:d},v)},ue=(0,A.forwardRef)(function(y,c){var k=y.children,u=le(y,c),i=u.list,C=u.tabKey,I=u.handleUpdate;return(0,m.jsx)("div",{className:G()("xm-tabs-panels"),children:i.map(function(h){return(0,m.jsx)("div",{className:G()("xm-tabs-panel",C===h.tabKey?"xm-tabs-panel-active":""),children:k(h.tabKey,h.data,I)},h.tabKey)})})}),se=ue,de=function(y,c){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{open:function(){},close:function(){},update:function(){}},i=(0,A.useRef)({activeKey:y,list:c});i.current.activeKey=y,i.current.list=c;var C=function(){var d=L()(p()().mark(function s(r,l){var n,e,t;return p()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(e=(n=i.current.list)===null||n===void 0?void 0:n.find(function(o){return o.key===r}),e){f.next=3;break}return f.abrupt("return");case 3:t=!1,Object.entries(l).forEach(function(o){var N=H()(o,2),j=N[0],$=N[1];e[j]!==$&&(e[j]=$,t=!0)}),t&&k(i.current.activeKey,z()(i.current.list));case 6:case"end":return f.stop()}},s)}));return function(r,l){return d.apply(this,arguments)}}(),I=function(){var d=L()(p()().mark(function s(r){var l;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.key===null||r.key===void 0||r.key===""||Number.isNaN(r.key))){e.next=2;break}return e.abrupt("return");case 2:if(l=i.current.list.find(function(t){return t.key===r.key}),!l){e.next=7;break}return C(r.key,r),k(r.key,z()(i.current.list)),e.abrupt("return");case 7:i.current.list.push(r),k(r.key,z()(i.current.list));case 9:case"end":return e.stop()}},s)}));return function(r){return d.apply(this,arguments)}}(),h=function(){var d=L()(p()().mark(function s(r){var l,n,e,t,a,f,o,N=arguments;return p()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return l=N.length>1&&N[1]!==void 0?N[1]:function(){return!0},$.next=3,l(r);case 3:if($.sent){$.next=5;break}return $.abrupt("return",!1);case 5:return n=i.current.list.findIndex(function(b){return b.key===r.key}),i.current.list.splice(n,1),e=i.current.activeKey,t=i.current.list.findIndex(function(b){return b.key===i.current.activeKey}),t===-1&&(i.current.list[n]?e=(o=i.current.list[n])===null||o===void 0?void 0:o.key:(f=n-1<0?0:n-1,e=(a=i.current.list[f])===null||a===void 0?void 0:a.key)),k(e,z()(i.current.list)),u==null||u.close(r.key),$.abrupt("return",!0);case 13:case"end":return $.stop()}},s)}));return function(r){return d.apply(this,arguments)}}(),D=function(){var d=L()(p()().mark(function s(){var r,l,n,e=arguments;return p()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=e.length>0&&e[0]!==void 0?e[0]:function(){return!0},l=i.current.list.filter(function(f){return!f.fixed});case 2:if(!(l.length>0)){a.next=13;break}if(n=l[0],n){a.next=6;break}return a.abrupt("break",13);case 6:return a.next=8,h(n,r);case 8:if(a.sent){a.next=10;break}return a.abrupt("break",13);case 10:l=i.current.list.filter(function(f){return!f.fixed}),a.next=2;break;case 13:case"end":return a.stop()}},s)}));return function(){return d.apply(this,arguments)}}(),F=function(){var d=L()(p()().mark(function s(r){var l,n,e=arguments;return p()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:l=e.length>1&&e[1]!==void 0?e[1]:function(){return!0};case 1:if(!(i.current.list.length>1)){a.next=11;break}if(n=i.current.list.find(function(f){return f.key!==r.key&&!f.fixed}),n){a.next=5;break}return a.abrupt("break",11);case 5:return a.next=7,h(n,l);case 7:if(a.sent){a.next=9;break}return a.abrupt("break",11);case 9:a.next=1;break;case 11:case"end":return a.stop()}},s)}));return function(r){return d.apply(this,arguments)}}(),K=function(){var d=L()(p()().mark(function s(r){var l,n,e,t,a=arguments;return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:l=a.length>1&&a[1]!==void 0?a[1]:function(){return!0},n=i.current.list.findIndex(function(N){return N.key===r.key}),e=i.current.list.slice(n+1).filter(function(N){return!N.fixed});case 3:if(!(e.length>0)){o.next=14;break}if(t=e[0],t){o.next=7;break}return o.abrupt("break",14);case 7:return o.next=9,h(t,l);case 9:if(o.sent){o.next=11;break}return o.abrupt("break",14);case 11:e=i.current.list.slice(n+1),o.next=3;break;case 14:case"end":return o.stop()}},s)}));return function(r){return d.apply(this,arguments)}}(),O=function(){var d=L()(p()().mark(function s(){var r,l;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=i.current.list.filter(function(t){return!t.fixed&&!t.edited});case 1:if(!(r.length>0)){e.next=12;break}if(l=r[0],l){e.next=5;break}return e.abrupt("break",12);case 5:return e.next=7,h(l);case 7:if(e.sent){e.next=9;break}return e.abrupt("break",12);case 9:r=i.current.list.filter(function(t){return!t.fixed&&!t.edited}),e.next=1;break;case 12:case"end":return e.stop()}},s)}));return function(){return d.apply(this,arguments)}}(),v=function(){var d=L()(p()().mark(function s(r,l){var n;return p()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:C(r,{fixed:l}),n=i.current.list.find(function(a){return a.key===r}),u==null||u.open(i.current.activeKey,n);case 3:case"end":return t.stop()}},s)}));return function(r,l){return d.apply(this,arguments)}}(),w=function(){var d=L()(p()().mark(function s(r,l){var n;return p()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:C(r,{edited:l}),n=i.current.list.find(function(a){return a.key===r}),u==null||u.open(i.current.activeKey,n);case 3:case"end":return t.stop()}},s)}));return function(r,l){return d.apply(this,arguments)}}(),S=function(s){var r=s.filter(function(n){return n.fixed}),l=s.filter(function(n){return!n.fixed});return[].concat(z()(r),z()(l))};return(0,A.useEffect)(function(){var d=!1;c==null||c.forEach(function(s,r){s.fixed&&c[r-1]&&!c[r-1].fixed&&(d=!0)}),d&&k(y,S(c))},[c]),(0,A.useEffect)(function(){var d=i.current.list.find(function(s){return s.key===y});u==null||u.open(y,d)},[y,u]),{update:C,add:I,close:h,closeAll:D,closeOther:F,closeRight:K,closeSaved:O,fixed:v,edited:w}},ce=function(){var y=(0,Q.Z)({tabList:[{key:"1",label:"\u6807\u7B7E\u98751",closeable:!0},{key:"2",label:"\u6807\u7B7E\u98752",closeable:!0},{key:"3",label:"\u6807\u7B7E\u98753",closeable:!0},{key:"5",label:"\u6807\u7B7E\u98755",closeable:!0},{key:"6",label:"\u6807\u7B7E\u98756",closeable:!0},{key:"7",label:"\u6807\u7B7E\u98757",closeable:!0},{key:"8",label:"\u6807\u7B7E\u98758",closeable:!0},{key:"4",label:"\u6807\u7B7E\u98754",closeable:!0,fixed:!0}],tabKey:"1"}),c=H()(y,2),k=c[0],u=c[1],i=(0,A.useRef)(null),C=de(k.tabKey,k.tabList,function(I,h){return u({tabKey:I,tabList:h})},i.current);return(0,m.jsxs)("div",{style:{display:"flex",height:400,flexDirection:"column"},children:[(0,m.jsx)(ie,{tabKey:k.tabKey,tabList:k.tabList,onChange:function(h,D){u({tabKey:h,tabList:D})},panel:i.current}),(0,m.jsx)(se,{ref:i,children:function(h,D,F){var K=k.tabList.find(function(O){return O.key===h});return(0,m.jsx)("div",{style:{height:"100%"},suppressContentEditableWarning:!0,contentEditable:!0,children:K==null?void 0:K.label})}})]})}}}]);
